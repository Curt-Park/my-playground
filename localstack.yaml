---
networks:
  localstack: {}
  ingress:
    name: ingress
    external: true

volumes:
  localstack_data: {}

services:
  localstack:
    image: localstack/localstack:3.8.1
    container_name: localstack
    ports:
      # LocalStack Gateway
      - 4566:4566
    environment:
      # LocalStack configuration:
      #   https://docs.localstack.cloud/references/configuration/
      - DEBUG=${DEBUG:-0}
    volumes:
      - localstack_data:/var/lib/localstack
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - localstack
      - ingress
    restart: always
